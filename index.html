<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quick Hangul - ì˜íƒ€-í•œê¸€ ì‹¤ì‹œê°„ ë³€í™˜ê¸°</title>
    <style>
        :root { --primary: #4f46e5; --bg: #f8fafc; }
        body { 
            font-family: 'Pretendard', sans-serif; background: var(--bg); 
            display: flex; justify-content: center; align-items: center; 
            min-height: 100vh; margin: 0; padding: 20px 0;
        }
        .container { 
            background: white; width: 90%; max-width: 500px; padding: 2.5rem; 
            border-radius: 20px; box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1); 
        }
        h1 { font-size: 1.6rem; color: #1e293b; text-align: center; margin-bottom: 0.5rem; }
        p.subtitle { color: #64748b; text-align: center; margin-bottom: 1.5rem; font-size: 0.9rem; }
        textarea { 
            width: 100%; height: 200px; padding: 1.2rem; border: 2px solid #e2e8f0; 
            border-radius: 12px; font-size: 1.2rem; resize: none; box-sizing: border-box; 
            outline: none; transition: border-color 0.2s; 
        }
        textarea:focus { border-color: var(--primary); }
        .btn-group { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 1.2rem; }
        button { padding: 0.9rem; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; transition: 0.2s; }
        .btn-copy { background: var(--primary); color: white; }
        .btn-reset { background: #e2e8f0; color: #475569; }
        button:hover { opacity: 0.9; transform: translateY(-1px); }
        .guide-box { margin-top: 30px; padding: 20px; border: 2px dashed var(--primary); border-radius: 12px; background: #f0f0ff; text-align: center; }
        .bookmarklet-btn { display: inline-block; padding: 10px 20px; background: var(--primary); color: white; text-decoration: none; border-radius: 25px; font-weight: bold; margin: 10px 0; }
    </style>
</head>
<body>

<div class="container">
    <h1>Quick Hangul by JC</h1>
    <p class="subtitle">í•´ì™¸ì—ì„œë„ ììœ ë¡­ê²Œ í•œê¸€ì„ íƒ€ì´í•‘í•˜ì„¸ìš”!</p>
    
    <textarea id="input" placeholder="ì˜íƒ€ë¥¼ ì¹˜ë©´ í•œê¸€ë¡œ ë³€í•©ë‹ˆë‹¤..." autocomplete="off"></textarea>
    
    <div class="btn-group">
        <button class="btn-reset" onclick="resetText()">ì§€ìš°ê¸°</button>
        <button class="btn-copy" onclick="copyText()">ë³µì‚¬í•˜ê¸°</button>
    </div>

    <div class="guide-box">
        <p style="font-weight: bold; color: var(--primary); margin: 0;">ğŸš€ PCìš© íŒì—… ë„êµ¬ ë“±ë¡</p>
        <p style="font-size: 0.8rem; color: #666;">ì•„ë˜ ë²„íŠ¼ì„ ì¦ê²¨ì°¾ê¸° ë°”ì— ë†“ìœ¼ì„¸ìš”.</p>
        <a class="bookmarklet-btn" href="javascript:(function(){/*...ê¸°ì¡´ì˜ ì„±ê³µí•œ ë¶ë§ˆí´ë¦¿ ì½”ë“œ...*/})();">í•œê¸€ íŒì—… ë„êµ¬</a>
    </div>
</div>

<script>
    const m={'q':'ã…‚','Q':'ã…ƒ','w':'ã…ˆ','W':'ã…‰','e':'ã„·','E':'ã„¸','r':'ã„±','R':'ã„²','t':'ã……','T':'ã…†','y':'ã…›','u':'ã…•','i':'ã…‘','o':'ã…','O':'ã…’','p':'ã…”','P':'ã…–','a':'ã…','s':'ã„´','d':'ã…‡','f':'ã„¹','g':'ã…','h':'ã…—','j':'ã…“','k':'ã…','l':'ã…£','z':'ã…‹','x':'ã…Œ','c':'ã…Š','v':'ã…','b':'ã… ','n':'ã…œ','m':'ã…¡'};
    const S='ã„±ã„²ã„´ã„·ã„¸ã„¹ã…ã…‚ã…ƒã……ã…†ã…‡ã…ˆã…‰ã…Šã…‹ã…Œã…ã…ã…ã…ã…‘ã…’ã…“ã…”ã…•ã…–ã…—ã…˜ã…™ã…šã…›ã…œã…ã…ã…Ÿã… ã…¡ã…¢ã…£';
    const T='ã„±ã„²ã„³ã„´ã„µã„¶ã„·ã„¹ã„ºã„»ã„¼ã„½ã„¾ã„¿ã…€ã…ã…‚ã…„ã……ã…†ã…‡ã…ˆã…Šã…‹ã…Œã…ã…';
    const c_l=[0,1,3,6,7,8,16,17,18,20,21,22,23,24,25,26,27,28,29], m_l=[0,1,2,3,4,5,6,7,8,10,11,12,13,14,15,16,17,18,20,22,27], b_l=[0,1,2,3,4,5,6,8,9,10,11,12,13,14,15,16,17,19,20,21,22,23,24,25,26,27,28,29];

    function assem(a){
        let r='',i=0;
        while(i<a.length){
            let c=S.indexOf(a[i]), n=S.indexOf(a[i+1]);
            if(c<19 && n>=19){
                let cho=c_l.indexOf(c), jung=m_l.indexOf(n-19), jong=0; i+=2;
                if(S.indexOf(a[i])<19 && S.indexOf(a[i+1])>=19){}
                else if(T.indexOf(a[i])>=0){ jong=b_l.indexOf(T.indexOf(a[i])+1); i++; }
                r+=String.fromCharCode(44032+(cho*21+jung)*28+jong);
            } else { r+=a[i]; i++; }
        }
        return r;
    }

    let charList = [];
    let lastVal = "";
    const inputArea = document.getElementById('input');

    inputArea.addEventListener('input', (e) => {
        const cur = inputArea.value;
        if (cur === "") { charList = []; lastVal = ""; return; }
        
        if (cur.length < lastVal.length) { // ì‚­ì œ ì‹œ
            const diff = lastVal.length - cur.length;
            for(let i=0; i<diff; i++) charList.pop();
        } else { // ì…ë ¥ ì‹œ
            const added = cur.substring(lastVal.length);
            for(let char of added){
                const k = m[char.toLowerCase()] || char;
                charList.push(k);
            }
        }
        const result = assem(charList);
        inputArea.value = result;
        lastVal = result;
        inputArea.selectionStart = inputArea.selectionEnd = result.length;
    });

    function resetText() { charList = []; inputArea.value = ''; lastVal = ''; inputArea.focus(); }
    function copyText() {
        navigator.clipboard.writeText(inputArea.value).then(() => alert('ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!'));
    }
</script>
</body>
</html>
