<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>영타-한글 변환기</title>
    <style>
        :root { --primary: #4f46e5; --bg: #f8fafc; }
        body { font-family: 'Pretendard', sans-serif; background: var(--bg); display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .container { background: white; width: 90%; max-width: 500px; padding: 2rem; border-radius: 20px; box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1); }
        h1 { font-size: 1.5rem; color: #1e293b; text-align: center; margin-bottom: 0.5rem; }
        p { color: #64748b; text-align: center; margin-bottom: 1.5rem; font-size: 0.9rem; }
        textarea { width: 100%; height: 200px; padding: 1rem; border: 2px solid #e2e8f0; border-radius: 12px; font-size: 1.2rem; resize: none; box-sizing: border-box; outline: none; transition: border-color 0.2s; }
        textarea:focus { border-color: var(--primary); }
        .btn-group { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 1rem; }
        button { padding: 0.8rem; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; transition: opacity 0.2s; }
        .btn-copy { background: var(--primary); color: white; }
        .btn-reset { background: #e2e8f0; color: #475569; }
        button:hover { opacity: 0.9; }
    </style>
</head>
<body>

<div class="container">
    <h1>영문 자판 → 한글 변환</h1>
    <p>영문 키보드 상태에서 그대로 타이핑하세요!</p>
    <textarea id="input" placeholder="typing here..."></textarea>
    <div class="btn-group">
        <button class="btn-reset" onclick="resetText()">지우기</button>
        <button class="btn-copy" onclick="copyText()">복사하기</button>
    </div>
</div>

<script src="https://unpkg.com/hangul-js"></script>
<script>
    const inputArea = document.getElementById('input');
    let charList = []; // 입력된 자모를 보관하는 곳

    // 영문-한글 매핑표
    const map = {
        'q':'ㅂ','Q':'ㅃ','w':'ㅈ','W':'ㅉ','e':'ㄷ','E':'ㄸ','r':'ㄱ','R':'ㄲ','t':'ㅅ','T':'ㅆ',
        'y':'ㅛ','u':'ㅕ','i':'ㅑ','o':'ㅐ','O':'ㅒ','p':'ㅔ','P':'ㅖ','a':'ㅁ','s':'ㄴ','d':'ㅇ',
        'f':'ㄹ','g':'ㅎ','h':'ㅗ','j':'ㅓ','k':'ㅏ','l':'ㅣ','z':'ㅋ','x':'ㅌ','c':'ㅊ','v':'ㅍ',
        'b':'ㅠ','n':'ㅜ','m':'ㅡ'
    };

    inputArea.addEventListener('keydown', (e) => {
        // 1. 백스페이스 처리: 마지막 입력 자모 하나 제거
        if (e.key === 'Backspace') {
            e.preventDefault();
            charList.pop();
            render();
            return;
        }

        // 2. 엔터, 스페이스바 처리
        if (e.key === 'Enter') { charList.push('\n'); render(); e.preventDefault(); return; }
        if (e.key === ' ') { charList.push(' '); render(); e.preventDefault(); return; }

        // 3. 한글 변환 처리
        const kor = map[e.key];
        if (kor) {
            e.preventDefault();
            charList.push(kor);
            render();
        }
    });

    // 화면에 글자를 합쳐서 보여주는 함수
    function render() {
        inputArea.value = Hangul.assemble(charList);
        inputArea.scrollTop = inputArea.scrollHeight;
    }

    function resetText() {
        charList = [];
        inputArea.value = '';
        inputArea.focus();
    }

    function copyText() {
        navigator.clipboard.writeText(inputArea.value);
        alert('복사되었습니다!');
    }
</script>

</body>
</html>